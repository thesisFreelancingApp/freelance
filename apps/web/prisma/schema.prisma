generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  user
  admin
}

enum Level {
  beginner
  intermediate
  advanced
}

enum Plan {
  Travail_principal
  Travail_secondaire
  usage_personnel
}

enum Jobs {
  Graphisme_Design
  Programmation_Tech
  Marketing_digital
  Video_Animation
  Redaction_Traduction
  Musique_Audio
  Business
  Finance
  Services_IA
  Croissance_personnelle
  Consultations
  Photographie
}

model User {
  id             String         @id @default(uuid())
  first_name     String?
  last_name      String?
  username       String         @unique
  display_name   String?
  bio            String?
  email          String         @unique
  password       String
  phone_number   String?
  profile_pic    String?
  role           Role
  is_seller      Boolean
  is_buyer       Boolean
  level          Level?
  plan           Plan?
  skills         Json?
  languages      Json?
  education      Json?
  certifications Json?
  jobs           Jobs?
  created_at     DateTime       @default(now())
  updated_at     DateTime       @updatedAt
  providerId     String?
  provider       String?
  emailVerified  DateTime?
}

model CategoryHierarchy {
  id          String   @id @default(uuid())
  name        String
  description String?  // New field
  level       Int      // 1 for Category, 2 for SubCategory, 3 for SubSubCategory
  parent_id   String?
  parent      CategoryHierarchy?  @relation("Hierarchy", fields: [parent_id], references: [id])
  children    CategoryHierarchy[] @relation("Hierarchy")

  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@index([parent_id])
}